{
  "name": "PatchPath AI - Cloud Development",
  "image": "mcr.microsoft.com/devcontainers/typescript-node:1-20-bullseye",

  "features": {
    "ghcr.io/devcontainers/features/azure-cli:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/docker-in-docker:2": {}
  },

  "forwardPorts": [3000, 3001],
  "portsAttributes": {
    "3000": {
      "label": "Next.js App",
      "onAutoForward": "notify"
    },
    "3001": {
      "label": "Next.js Dev (Fallback)",
      "onAutoForward": "notify"
    }
  },

  "postCreateCommand": "npm install && bash .devcontainer/setup-env.sh && echo 'âœ… PatchPath dev environment ready!' && echo 'ğŸš€ Run: npm run dev' && echo 'ğŸ“Š Ports forwarded: 3000, 3001'",

  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss",
        "ms-azuretools.vscode-docker",
        "GitHub.copilot",
        "gustavoinacio.oled-neon-theme"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": true
        },
        "typescript.tsdk": "node_modules/typescript/lib",

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CLAUDE CODE DANGER MODE - Container Edition
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        // Model: Sonnet 4.5 (maximum capability)
        "claudeCode.model": "claude-sonnet-4-5",
        "claudeCode.maxTokens": 8192,

        // Skip ALL confirmations (it's a container, YOLO!)
        "claudeCode.dangerouslySkipWriteConfirmations": true,
        "claudeCode.dangerouslySkipReadConfirmations": true,
        "claudeCode.dangerouslySkipEditConfirmations": true,
        "claudeCode.alwaysAllowBash": true,

        // Auto-approve ALL tools
        "claudeCode.autoApproveAllTools": true,

        // Maximum autonomy
        "claudeCode.autoFixErrors": true,
        "claudeCode.autoInstallDependencies": true,
        "claudeCode.parallelToolExecution": true,
        "claudeCode.maxConcurrentTools": 10,

        // Performance
        "claudeCode.tokenBudget": 200000,
        "claudeCode.aggressiveCaching": true
      }
    }
  },

  "remoteEnv": {
    "NODE_ENV": "development",

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CLAUDE CODE PERFORMANCE OPTIMIZATIONS (Hidden Settings!)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // Performance: Max output tokens for longer responses
    "CLAUDE_CODE_MAX_OUTPUT_TOKENS": "8192",

    // Thinking modes: Enable extended thinking capability
    "MAX_THINKING_TOKENS": "10000",

    // MCP: Faster timeouts for containerized environment
    "MCP_TIMEOUT": "30000",
    "MCP_TOOL_TIMEOUT": "60000",

    // Reduce non-essential model calls (save tokens)
    "DISABLE_NON_ESSENTIAL_MODEL_CALLS": "false",

    // Terminal: Keep titles clean
    "CLAUDE_CODE_DISABLE_TERMINAL_TITLE": "true",

    // Telemetry: Optional - disable if you want
    "DISABLE_TELEMETRY": "false",
    "DISABLE_ERROR_REPORTING": "false",

    // Node.js: Performance tuning for Next.js builds
    "NODE_OPTIONS": "--max-old-space-size=4096"
  },

  "mounts": [
    "source=${localEnv:HOME}/.azure,target=/home/vscode/.azure,type=bind,consistency=cached"
  ],

  "postStartCommand": "git config --global --add safe.directory ${containerWorkspaceFolder}"
}
